{
  "name": "fh-mbaas-express",
  "version": "5.3.9",
  "description": "FeedHenry MBAAS Express",
  "main": "lib/webapp.js",
  "author": {
    "name": "FeedHenry"
  },
  "dependencies": {
    "async": "0.2.9",
    "body-parser": "~1.6.7",
    "cors": "2.1.0",
    "express": "~4.10.8",
    "fh-amqp-js": "0.4.1",
    "fh-mbaas-client": "^0.6.1",
    "fh-reportingclient": "0.3.7",
    "multer": "0.1.8",
    "request": "2.40.0",
    "type-is": "~1.1.0",
    "underscore": "1.5.1"
  },
  "directories": {
    "lib": "lib"
  },
  "engines": {
    "node": ">=0.8"
  },
  "devDependencies": {
    "cli-color": "0.2.2",
    "form-data": "0.1.2",
    "grunt": "^0.4.5",
    "grunt-fh-build": "^0.3.0",
    "istanbul": "^0.3.16",
    "jshint": "^2.5.2",
    "nock": "0.22.1",
    "plato": "^1.0.1",
    "proxyquire": "0.4.1",
    "turbo-test-runner": "~0.3"
  },
  "license": "Copyright (c) 2014 FeedHenry Ltd, All Rights Reserved.",
  "repository": {
    "type": "git",
    "url": "git@github.com:fheng/fh-mbaas-express.git"
  },
  "readme": "fh-mbaas-express\n================\n\nfh-mbaas-express is the FeedHenry MBaaS running on top of [Express](http://expressjs.com/).\n\n# Usage\n\nAdd the following to the 'dependencies' section of the app's **'package.json'** file:\n\n    \"fh-mbaas-express\" : \"~4.0.0\",\n    \"express\" : \"~4.0.0\"\n\nAdd a file to the app's **'application.js'**, with the following contents:\n\n```javascript\nvar express = require('express');\nvar mbaasExpress = require('fh-mbaas-express');\nvar cors = require('cors');\n\n// list the endpoints which you want to make securable here\nvar securableEndpoints;\n// fhlint-begin: securable-endpoints\nsecurableEndpoints = ['/hello'];\n// fhlint-end\n\nvar app = express();\n\n// Enable CORS for all requests\napp.use(cors());\n\n// Note: the order which we add middleware to Express here is important!\napp.use('/sys', mbaasExpress.sys(securableEndpoints));\napp.use('/mbaas', mbaasExpress.mbaas);\n\n// Note: important that this is added just before your own Routes\napp.use(mbaasExpress.fhmiddleware());\n\n// allow serving of static files from the public directory\napp.use(express.static(__dirname + '/public'));\n\n// fhlint-begin: custom-routes\napp.use('/', require('./lib/cloud.js')());\n// fhlint-end\n\n// Important that this is last!\napp.use(mbaasExpress.errorHandler());\n\nvar port = process.env.FH_PORT || process.env.VCAP_APP_PORT || 8001;\nvar server = app.listen(port, function() {\n  console.log(\"App started at: \" + new Date() + \" on port: \" + port);\n});\n```\n\nWhen running on the [FeedHenry](http://www.feedhenry.com/) platform, this module should not be used directly. Instead, [fh-mbaas-api](https://github.com/fheng/fh-mbaas-api) module should be used and an instance of fh-mbaas-express cab be obtained via fh-mbaas-api. E.g.\n\n```javascript\nvar mbaasApi = require('fh-mbaas-api');\nvar mbaasExpress = mbaasApi.mbaasExpress();\n```\n\n## Customising & Extending\nThe above application.js is just an [Expressjs application](http://expressjs.com/api.html) - it's easily extensible.\n\n### Custom APIs\nYou can create custom API handlers in the Express format by doing:\n\n    app.use('/myapi', function(req, res){\n      res.end('My custom response');\n    });\n\nSee [Express Router](http://expressjs.com/4x/api.html#router) for more information.\n\n### Serving Static Files\nExpress has a built-in static file server. In this example, we host files under the public directory:  \n    \n    app.use(express.static(__dirname + '/public'));\n\n\n# REST API\t\n\n\n## Cloud\n\n###(POST | GET | PUT | DELETE) /:someFunction\n**Authentication** : Optional - can be enabled globally or on a per-endpoint basis under \"Endpoints\" section of the studio.\n**Response formats** : JSON, binary, plain text\n\n###Headers\n**x-fh-auth-app** : API key of your application, found under the \"details\" section of the studio.\n\n###Body:\nJSON format - paramaters to be passed to the exported function, see 'Writing API Functions'.\n###Response:\nResult as passed to the callback function of the exported function - see 'Writing API Functions'.\n\n\n###Writing API functions\n\nSee [Express Router](http://expressjs.com/4x/api.html#router) for more information.\n\n```javascript\nfunction helloRoute() {\n  var hello = new express.Router();\n  hello.use(bodyParser());\n\n  // GET REST endpoint - query params may or may not be populated\n  hello.get('/hello', function(req, res) {\n    var world = req.query ? req.query.hello : 'World';\n\n    res.writeHead(200, {\"Content-Type\":\"application/json\"});\n    res.end(JSON.stringify({msg: 'Hello ' + world}));\n  });\n  return hello;\n}\n\n```\n\n\n##mBaaS\n###POST /mbaas/db\n**Authentication** : Required - App API key goes here.\n**Response format** : JSON\n\n###Headers\n**x-fh-auth-app** : API key of your application, found under the \"details\" section of the studio.\n\n###POST Body:\nJSON body - same as $fh.db params. A summary of body options follows - For more, see [$fh.db docs](http://docs.feedhenry.com/v2/api_cloud_apis.html#$fh.db)\n\n    {\n        \"act\": \"create|update|list|delete|deleteall\",\n        \"type\": \"collectionName\",\n        \"guid\": \"GUID of object operating on - not required for list or deleteall\",\n        \"fields\": \"JSON definition of fields - required for create|update\",\n        \"eq|ne|in\" : \"JSON definition of query to match - supported for list only\"\n    }\n\n###Response:\nAs per [$fh.db](http://docs.feedhenry.com/v2/api_cloud_apis.html#$fh.db)\n\n##Sys\n##GET /sys/info/ping\n**Authentication** : None\n**Response formats** : Plaintext\n\n###Headers\nNone\n\n###Response:\n    \"OK\"\nif application is running as expected. Will respond with a 404 otherwise\n\n##GET /sys/info/endpoints\n**Authentication** : None\n**Response formats** : JSON\n\n###Headers\nNone\n\n###Response:\n    {\n      endpoints : ['array of endpoints exported as public functions']\n    }\n\n##GET /sys/info/memory\n**Authentication** : None\n**Response formats** : JSON\n\n###Headers\nNone\n\n###Response:\n    {\n      rss: 13721600, // Resident set size\n      heapTotal: 7195904, // V8's total available memory\n      heapUsed: 2369744  // V8's used memory\n    }\n\n##GET /sys/info/memory\n**Authentication** : None\n**Response formats** : Plaintext\n\n###Headers\nNone\n\n###Response:\n    0.1.0\n\n# Backward compatability with main.js\n\nIf you want to use the older fh-nodeapp/fh-webapp style main.js, you need to change the /cloud endpoint in your application.js as follows:\n\n```\nvar mainjs = require('./lib/main.js');\napp.use('/cloud', mbaas.cloud(mainjs));\n```\n\nAdditionally, you need to ammend the call to `sys` for secure endpoints:\n\n```\napp.use('/sys', mbaas.sys(securableEndpoints, mainjs));\n```\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/fheng/fh-mbaas-express/issues"
  },
  "homepage": "https://github.com/fheng/fh-mbaas-express",
  "_id": "fh-mbaas-express@5.3.9",
  "_shasum": "7a6569782be1b4cd5263dcb7306caf5015263cb2",
  "_from": "https://registry.npmjs.org/fh-mbaas-express/-/fh-mbaas-express-5.3.9.tgz",
  "_resolved": "https://registry.npmjs.org/fh-mbaas-express/-/fh-mbaas-express-5.3.9.tgz"
}
